"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),Market=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"showMarketForm",value:function(n){$.ajax({method:"GET",url:"/market/"+n}).done(function(t){if(t){$("#marketDetails").html(t);$("#marketTitleName").html(n);$("#marketModal").modal("show");$(".btn-submit").on("click",function(){market.onSubmit()})}})}},{key:"showMarketRateForm",value:function(n){$.ajax({method:"GET",url:"/market/EditRate/"+n}).done(function(t){if(t){$("#marketDetails").html(t);$("#marketTitleName").html(n);$("#marketModal").modal("show");$(".btn-submit").on("click",function(){market.onSubmitRate()})}})}},{key:"onSubmitRate",value:function(){var n=$("#marketModal");n.find("#updateBtn").prop("disabled",!0);$.ajax({method:"POST",url:"/market/EditRate",dataType:"json",data:$("#marketForm").serialize()}).done(function(t){t.success?(n.find("#failedMsg").hide(),n.find("#successMsg").show(),setTimeout(function(){n.find("#updateBtn").prop("disabled",!1);n.modal("hide");location.reload()},1e3)):(n.find("#failedMsg").show(),n.find("#failedMsgContent").html(t.message),n.find("#updateBtn").prop("disabled",!1))})}},{key:"onSubmit",value:function(){if($("#Name").val()==""){$("#failedMsg").show();$("#Name").focus();$("#failedMsg").html("Market name is required.");return}if($("#Currencies").val()==""){$("#failedMsg").show();$("#Currencies").focus();$("#failedMsg").html("Currency is required.");return}$("#failedMsg").hide();$.ajax({method:"POST",url:"/market/update",dataType:"json",data:$("#marketForm").serialize()}).done(function(n){n?$("#successMsg").show():$("#failedMsg").show();setTimeout(function(){$("#marketModal").modal("hide");location.reload()},1e3)})}},{key:"onChangeBase",value:function(){var n=$("#IsBase").prop("checked");n&&$("#Rate").val(1);$("#Rate").prop("disabled",n)}},{key:"updateStatus",value:function(n,t){$.ajax({method:"POST",url:"/market/updatestatus",dataType:"json",data:{name:n,enabled:t}}).done(function(n){n?$("#updateStatusSuccess").show():$("#updateStatusFailed").show();setTimeout(function(){location.reload()},1e3)})}},{key:"init",value:function(){$(".btn-edit").on("click",function(){var n=$(this).attr("market-name");market.showMarketForm(n)});$(".btn-edit-rate").on("click",function(){var n=$(this).attr("market-name");market.showMarketRateForm(n)});$(".market-status-chk").on("change",function(){var n=$(this).attr("market-name"),t=$(this).is(":checked");market.updateStatus(n,t)})}}]),n}(),market=new Market;market.init();stickHeader.stick(".inner-content","table#report-table",120,-20);