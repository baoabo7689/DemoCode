class Market{showMarketForm(n){$.ajax({method:"GET",url:"/market/"+n}).done(function(t){if(t){$("#marketDetails").html(t);$("#marketTitleName").html(n);$("#marketModal").modal("show");$(".btn-submit").on("click",function(){market.onSubmit()})}})}showMarketRateForm(n){$.ajax({method:"GET",url:"/market/EditRate/"+n}).done(function(t){if(t){$("#marketDetails").html(t);$("#marketTitleName").html(n);$("#marketModal").modal("show");$(".btn-submit").on("click",function(){market.onSubmitRate()})}})}onSubmitRate(){const n=$("#marketModal");n.find("#updateBtn").prop("disabled",!0);$.ajax({method:"POST",url:"/market/EditRate",dataType:"json",data:$("#marketForm").serialize()}).done(function(t){t.success?(n.find("#failedMsg").hide(),n.find("#successMsg").show(),setTimeout(function(){n.find("#updateBtn").prop("disabled",!1);n.modal("hide");location.reload()},1e3)):(n.find("#failedMsg").show(),n.find("#failedMsgContent").html(t.message),n.find("#updateBtn").prop("disabled",!1))})}onSubmit(){if($("#Name").val()==""){$("#failedMsg").show();$("#Name").focus();$("#failedMsg").html("Market name is required.");return}if($("#Currencies").val()==""){$("#failedMsg").show();$("#Currencies").focus();$("#failedMsg").html("Currency is required.");return}$("#failedMsg").hide();$.ajax({method:"POST",url:"/market/update",dataType:"json",data:$("#marketForm").serialize()}).done(function(n){n?$("#successMsg").show():$("#failedMsg").show();setTimeout(function(){$("#marketModal").modal("hide");location.reload()},1e3)})}onChangeBase(){const n=$("#IsBase").prop("checked");n&&$("#Rate").val(1);$("#Rate").prop("disabled",n)}updateStatus(n,t){$.ajax({method:"POST",url:"/market/updatestatus",dataType:"json",data:{name:n,enabled:t}}).done(function(n){n?$("#updateStatusSuccess").show():$("#updateStatusFailed").show();setTimeout(function(){location.reload()},1e3)})}init(){$(".btn-edit").on("click",function(){var n=$(this).attr("market-name");market.showMarketForm(n)});$(".btn-edit-rate").on("click",function(){var n=$(this).attr("market-name");market.showMarketRateForm(n)});$(".market-status-chk").on("change",function(){var n=$(this).attr("market-name"),t=$(this).is(":checked");market.updateStatus(n,t)})}}var market=new Market;market.init();stickHeader.stick(".inner-content","table#report-table",120,-20);