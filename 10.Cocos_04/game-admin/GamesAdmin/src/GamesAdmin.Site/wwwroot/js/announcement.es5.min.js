"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),Announcement=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"showEnableDisable",value:function(n,t,i){var u=!(n=="True"),f=u?"enable":"disable",r=$("#enableModal");r.find("#enableParam").val(u);r.find("#tableIndexParam").val(t);r.find("#reloadContent").html("Are you sure you want to "+f+" announcement <b>"+i+"<\/b>");r.modal("show")}},{key:"submitEnableDisable",value:function(){var n=$("#enableModal"),t=n.find("#enableParam").val(),i=n.find("#tableIndexParam").val();n.find("#confirmBtn").prop("disabled",!0);$.ajax({method:"PUT",url:"/announcement/UpdateStatus",dataType:"json",data:{Status:t,Id:i}}).done(function(t){t?n.find("#updateMsgSuccess").show():n.find("#updateMsgFailed").show();setTimeout(function(){n.find("#confirmBtn").prop("disabled",!1);n.find("#updateMsgSuccess").hide();n.find("#updateMsgFailed").hide();n.modal("hide")},1e3)})}},{key:"cancelEnableDisable",value:function(){var n=$("#enableModal");n.modal("hide");announcementReport.loadReport()}},{key:"showEditModal",value:function(n){var t=$("#editModal"),i=t.find("#announcementModalTitle");i.html(n?"Edit Announcement":"Add New Announcement");name||(name="");$.ajax({method:"GET",url:"/announcement/edit"+(n?"?id="+n:"")}).done(function(n){n&&(t.find("#editdetails").html(n),t.modal("show"))})}},{key:"submitEdit",value:function(){var n=$("#editModal");if($("#Data_Title").val()==""){$("#failedMsg").show();$("#Data_Title").focus();$("#failedMsg").html("Title is required.");return}if($("#Data_Contents_en_").val()==""){$("#failedMsg").show();$("#Data_Title").focus();$("#failedMsg").html("English content is required.");return}n.find("#updateBtn").prop("disabled",!0);$.ajax({method:"POST",url:"/announcement/edit",dataType:"json",data:n.find("#editForm").serialize()}).done(function(t){t.success?(n.find("#failedMsg").hide(),n.find("#successMsg").show(),setTimeout(function(){n.find("#updateBtn").prop("disabled",!1);n.find("#gameModal").modal("hide");location.reload()},1e3)):(n.find("#failedMsg").show(),n.find("#failedMsgContent").html(t.message),n.find("#updateBtn").prop("disabled",!1))})}},{key:"loadReport",value:function(){$("#reportForm").submit()}}]),n}(),announcementReport=new Announcement;stickHeader.stick(".inner-content","table#report-table",120,-20);$(document).ready(function(){announcementReport.loadReport()});