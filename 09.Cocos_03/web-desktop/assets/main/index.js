window.__require=function e(t,n,o){function r(c,a){if(!n[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var p=n[c]={exports:{}};t[c][0].call(p.exports,function(e){return r(t[c][1][e]||e)},p,p.exports,e,t,n,o)}return n[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<o.length;c++)r(o[c]);return r}({GameLevel:[function(e,t,n){"use strict";cc._RF.push(t,"be7ffor7t9B9aM7ssBPEMrX","GameLevel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./LevelObstacle"),c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goal=null,t.obstacleContainer=null,t.obstacles=[],t}return o(t,e),t.prototype.onLoad=function(){var e=this;this.obstacleContainer.children.forEach(function(t){var n=t.getComponent(i.default);n&&e.obstacles.push(n)})},t.prototype.getLevelScore=function(){return this.obstacles.length},r([s(cc.Node)],t.prototype,"goal",void 0),r([s(cc.Node)],t.prototype,"obstacleContainer",void 0),t=r([a],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./LevelObstacle":"LevelObstacle"}],GameScene:[function(e,t,n){"use strict";cc._RF.push(t,"cb83fwygzdA4KJEPYtVeIEW","GameScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(c,a)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a,s=e("../Player"),l=e("../GameLevel"),p=e("../GameUtils"),u=cc._decorator,f=u.ccclass,d=u.property;(function(e){e[e.None=0]="None",e[e.Played=1]="Played",e[e.Paused=2]="Paused",e[e.Ended=3]="Ended"})(a||(a={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pauseDialog=null,t.resultLayer=null,t.titleWon=null,t.titleLost=null,t.buttonNext=null,t.buttonReplay=null,t.progress=null,t.player=null,t.level=null,t.state=a.None,t.flyingSpeed=60,t.gameScore=0,t}return o(t,e),t.prototype.onLoad=function(){this.loadLevel(),this.loadPlayer(),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.updateProgress=function(){this.progress.progress=this.gameScore/this.level.getLevelScore()},t.prototype.loadPlayer=function(){return i(this,void 0,void 0,function(){var e,t,n,o=this;return c(this,function(r){switch(r.label){case 0:return e=cc.sys.localStorage.getItem("selected_player")||1,t="players/bird - "+e,[4,p.default.LoadResource(t)];case 1:return n=r.sent(),this.node.addChild(n),this.player=n.getComponent(s.default),this.player.playerCollisionCallback=function(){return o.killPlayer()},[2]}})})},t.prototype.loadLevel=function(){return i(this,void 0,void 0,function(){var e,t,n,o;return c(this,function(r){switch(r.label){case 0:return e=cc.sys.localStorage.getItem("selected_level"),t=(e-1)%2+1,console.log('play level " + '+t+"  "+e),n="levels/level - "+t,[4,p.default.LoadResource(n)];case 1:return o=r.sent(),this.node.addChild(o),this.level=o.getComponent(l.default),this.updateProgress(),[2]}})})},t.prototype.onTouchStart=function(e){this.state===a.None&&(this.state=a.Played,this.player.play()),this.state===a.Played&&this.player.flyUp()},t.prototype.update=function(e){if(this.state===a.Played){this.level.node.x-=this.flyingSpeed*e,this.checkCollision();var t=0,n=this.player.node.convertToWorldSpaceAR(cc.v2(0,0));this.level.obstacles.forEach(function(e){var o=e.node.convertToWorldSpaceAR(cc.v2(0,0));n.x>o.x+50&&t++}),this.gameScore!==t&&(this.gameScore=t,this.updateProgress())}},t.prototype.checkCollision=function(){var e=this.player.node.height,t=this.node.height/2-e/2;this.player.node.y>=t||this.player.node.y<=-t?this.killPlayer():this.player.node.getBoundingBoxToWorld().intersects(this.level.goal.getBoundingBoxToWorld())&&(this.player.stop(),this.showLevelResult(!0))},t.prototype.killPlayer=function(){this.state=a.Ended,this.player.die(),this.showLevelResult(!1)},t.prototype.showLevelResult=function(e){this.resultLayer.active=!0,this.titleWon.active=e,this.titleLost.active=!e,this.buttonNext.active=e,this.buttonReplay.active=!e},t.prototype.pauseGame=function(){this.state=a.Paused,this.player.stop()},t.prototype.resumeGame=function(){this.state=a.Played,this.player.resume()},t.prototype.onPressedPause=function(){this.pauseDialog.active=!0,this.pauseGame()},t.prototype.onPressedResume=function(){this.pauseDialog.active=!1,this.resumeGame()},t.prototype.onPressedReplay=function(){cc.director.loadScene("GameScene")},t.prototype.onPressedNextLevel=function(){var e=cc.sys.localStorage.getItem("selected_level");cc.sys.localStorage.setItem("selected_level",+e+1),cc.director.loadScene("GameScene")},t.prototype.onPressedHome=function(){cc.director.loadScene("MainScene")},r([d(cc.Node)],t.prototype,"pauseDialog",void 0),r([d(cc.Node)],t.prototype,"resultLayer",void 0),r([d(cc.Node)],t.prototype,"titleWon",void 0),r([d(cc.Node)],t.prototype,"titleLost",void 0),r([d(cc.Node)],t.prototype,"buttonNext",void 0),r([d(cc.Node)],t.prototype,"buttonReplay",void 0),r([d(cc.ProgressBar)],t.prototype,"progress",void 0),t=r([f],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../GameLevel":"GameLevel","../GameUtils":"GameUtils","../Player":"Player"}],GameUtils:[function(e,t,n){"use strict";cc._RF.push(t,"eea14VQ+u5AJIYlC3wh7W7b","GameUtils"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.LoadResource=function(e){return new Promise(function(t,n){cc.resources.load(e,function(e,n){var o=cc.instantiate(n);t(o)})})},e}();n.default=o,cc._RF.pop()},{}],LevelItem:[function(e,t,n){"use strict";cc._RF.push(t,"1e4dbtnGcZIjbrNo+UbeJav","LevelItem");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.level=0,t.callback=function(e){},t}return o(t,e),t.prototype.setLevel=function(e){this.level=e,this.label.string=e.toString()},t.prototype.onItemClick=function(){this.callback(this.level)},r([a(cc.Label)],t.prototype,"label",void 0),t=r([c],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],LevelObstacle:[function(e,t,n){"use strict";cc._RF.push(t,"bf028kW9GJFkLd1gu6rioif","LevelObstacle");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.objects=[],t}return o(t,e),r([a({type:cc.Node})],t.prototype,"objects",void 0),t=r([c],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],LevelScene:[function(e,t,n){"use strict";cc._RF.push(t,"9efa7gzJgNFrb7EM3pRsjSd","LevelScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../LevelItem"),c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.content=null,t.leftArrow=null,t.rightArrow=null,t.pageSize=25,t.pageMax=3,t.items=[],t.pageIndex=0,t}return o(t,e),t.prototype.onLoad=function(){this.initItems(),this.updateArrowsVisibility(),this.updateItems()},t.prototype.initItems=function(){for(var e=this,t=0;t<this.pageSize;t++){var n=cc.instantiate(this.itemPrefab);n.active=!0,this.content.addChild(n);var o=n.getComponent(i.default);o.callback=function(t){return e.onItemClick(t)},this.items.push(o)}},t.prototype.updateItems=function(){var e=this;this.items.forEach(function(t,n){var o=e.pageIndex*e.pageSize+n+1;t.setLevel(o)})},t.prototype.onItemClick=function(e){cc.sys.localStorage.setItem("selected_level",e),cc.director.loadScene("GameScene")},t.prototype.onArrowClick=function(e,t){this.pageIndex+=+t,this.pageIndex=Math.max(0,this.pageIndex),this.pageIndex=Math.min(this.pageMax,this.pageIndex),this.updateArrowsVisibility(),this.updateItems()},t.prototype.updateArrowsVisibility=function(){this.leftArrow.active=this.pageIndex>0,this.rightArrow.active=this.pageIndex<this.pageMax},r([s(cc.Node)],t.prototype,"itemPrefab",void 0),r([s(cc.Node)],t.prototype,"content",void 0),r([s(cc.Node)],t.prototype,"leftArrow",void 0),r([s(cc.Node)],t.prototype,"rightArrow",void 0),t=r([a],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../LevelItem":"LevelItem"}],MainScene:[function(e,t,n){"use strict";cc._RF.push(t,"d73c4R8RvhLDLvpkIQLzfnZ","MainScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onPressedPlay=function(){cc.director.loadScene("LevelScene")},t.prototype.onPressedShopping=function(){cc.director.loadScene("ShopScene")},t=r([c],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],MovableObject:[function(e,t,n){"use strict";cc._RF.push(t,"7ed42vw7wlI/q4aUHvN8eVi","MovableObject");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.offset=cc.v2(0,0),t.interval=1,t.delay=0,t.loop=-1,t}return o(t,e),t.prototype.onLoad=function(){var e=cc.tween().by(this.interval,{position:this.offset},{easing:"sineInOut"}).delay(this.delay).by(this.interval,{position:this.offset.mul(-1)},{easing:"sineInOut"}).delay(this.delay);this.loop<0?cc.tween(this.node).repeatForever(e).start():cc.tween(this.node).repeat(this.loop,e).start()},r([a],t.prototype,"offset",void 0),r([a],t.prototype,"interval",void 0),r([a],t.prototype,"delay",void 0),r([a],t.prototype,"loop",void 0),t=r([c],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],NestedPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"c70efh6nhhBdqWVMDDfvuQt","NestedPrefab");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.NestedPrefab=n.nestArray=n.nestSingle=n.nest=void 0;var i,c=e("./UnselectableComponent"),a=cc._decorator,s=a.ccclass,l=a.disallowMultiple,p=a.executeInEditMode,u=a.menu,f=a.property;n.nest=function(e){return console.error(void 0!==e,"Type is undefined."),e instanceof Array?n.nestArray(e[0]):n.nestSingle(e)},n.nestSingle=function(e){return function(t,n){var o=n+"_prefab";f({type:d,displayName:n,visible:!0})(t,o,{initializer:function(){return null}}),Object.defineProperty(t,n,{set:function(e){},get:function(){var t=this[o];if(void 0===t)return null;var n=t.view;if(null===n)return null;var r=n.getComponent(e);return console.error(null!==r),r},configurable:!1,enumerable:!0})}},n.nestArray=function(e){return function(t,n){var o=n+"_prefab";f({type:[d],displayName:n,visible:!0})(t,o,{initializer:function(){return[]}}),Object.defineProperty(t,n,{set:function(e){},get:function(){var t=this[o];return void 0===t?null:t.map(function(e){return e.view}).map(function(t){return null===t?null:t.getComponent(e)})},configurable:!1,enumerable:!0})}},function(e){e[e.Prefab=0]="Prefab",e[e.Node=1]="Node"}(i||(i={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mode=i.Prefab,t.instantiated=!1,t._view=null,t._prefab=null,t.instantiate=!0,t.synchronize=!1,t}var n;return o(t,e),n=t,t.createNode=function(e){var t=new cc.Node,o=t.addComponent(n);o.prefab=e,t.name=e.name;var r=o.view;return null===r?null:(t.setContentSize(r.getContentSize()),t.setAnchorPoint(r.getAnchorPoint()),t)},Object.defineProperty(t.prototype,"view",{get:function(){if(this.mode===i.Prefab){if(!this.instantiate)return null;if(null===this.prefab)return null;this.instantiated||this.instantiateView()&&(this.instantiated=!0,this.applySync())}return this._view},set:function(e){if(this.destroyView(),this._view=e,null!==this._view){if(this.mode=i.Node,this._prefab=null,null!==this._view.parent)throw new Error("View is already in scene.");this._view.parent=this.node}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prefab",{get:function(){return this._prefab},set:function(e){this.destroyView(),this._prefab=e,null!==this._prefab&&(this.mode=i.Prefab,this.instantiateView()&&(this.instantiated=!0,this.setupView()))},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){!this.instantiated&&this.instantiate&&this.mode===i.Prefab&&this.instantiateView()&&(this.instantiated=!0,this.applySync())},t.prototype.update=function(){this.instantiate&&this.mode===i.Prefab&&console.error(null!==this._view,"View should be present at runtime.")},t.prototype.createView=function(){return null===this.prefab?null:cc.instantiate(this.prefab)},t.prototype.destroyView=function(){if(this.mode===i.Prefab&&null!==this._prefab)if(null===this._view){if(this.instantiate&&this._isOnLoadCalled)throw new Error("Prefab exist but the view is not present")}else this.instantiated=!1,this._view.removeFromParent(!0),this._view.destroy(),this._view=null;this.mode===i.Node&&null!==this._view&&(this._view.removeFromParent(!0),this._view.destroy(),this._view=null)},t.prototype.instantiateView=function(){return null!==this._view?(console.warn("View already instantiate."),!1):null===this.prefab?(console.warn("Prefab is not exist."),!1):(this._view=this.createView(),this._view&&this.node.addChild(this._view),!0)},t.prototype.setupView=function(){return null===this._view?(console.warn("View is not present"),!1):(this.freeze(this._view),this._view._objFlags|=cc.Object.Flags.DontSave,!0)},t.prototype.freeze=function(e){var t=this;null===e.getComponent(c.UnselectableComponent)&&e.addComponent(c.UnselectableComponent);var o=e.getComponent(n);null!==o&&(o.instantiate||(e.active=!1)),e.children.forEach(function(e){return t.freeze(e)})},t.prototype.applySync=function(){var e=this.view;null!==e&&this.synchronize&&(this.node.setContentSize(e.getContentSize()),this.node.setAnchorPoint(e.getAnchorPoint()))},r([f(cc.Prefab)],t.prototype,"_prefab",void 0),r([f({type:cc.Prefab})],t.prototype,"prefab",null),r([f(cc.Boolean)],t.prototype,"instantiate",void 0),r([f(cc.Boolean)],t.prototype,"synchronize",void 0),t=n=r([s,l,p,u("ee/NestedPrefab")],t)}(cc.Component);n.NestedPrefab=d,cc._RF.pop()},{"./UnselectableComponent":"UnselectableComponent"}],PlayerItem:[function(e,t,n){"use strict";cc._RF.push(t,"7623bFV8/RKwJIj2sPJZ5dd","PlayerItem");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerId=0,t.callback=function(e){},t}return o(t,e),t.prototype.setPlayer=function(e){this.playerId=e},t.prototype.onPressedPlayerItem=function(){this.callback(this.playerId)},t=r([c],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"fbbe1PP8VJPApR8ajGaIyvy","Player");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},i=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(c,a)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./SpriteAnimation"),s=e("./GameUtils"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=null,t.deadAnimation=null,t.speed=0,t.played=!1,t.playerCollisionCallback=function(){},t}return o(t,e),t.prototype.onLoad=function(){return i(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return this.animation=this.getComponent(a.default),[4,s.default.LoadResource("players/bird_died")];case 1:return e=t.sent(),this.node.addChild(e),e.active=!1,this.deadAnimation=e.getComponent(a.default),cc.director.getCollisionManager().enabled=!0,[2]}})})},t.prototype.onCollisionEnter=function(e,t){this.playerCollisionCallback()},t.prototype.play=function(){var e;this.resume(),null===(e=this.animation)||void 0===e||e.play()},t.prototype.die=function(){this.animation.main.node.active=!1,this.deadAnimation.node.active=!0,this.deadAnimation.play(),this.stop()},t.prototype.stop=function(){var e;this.played=!1,null===(e=this.animation)||void 0===e||e.stop()},t.prototype.resume=function(){this.played=!0},t.prototype.flyUp=function(){this.speed=2},t.prototype.update=function(e){if(this.played){this.speed-=.05,this.node.y+=this.speed;var t=-this.speed/2*30;t>=30&&(t=30),this.node.angle=-t}},t=r([p],t)}(cc.Component));n.default=u,cc._RF.pop()},{"./GameUtils":"GameUtils","./SpriteAnimation":"SpriteAnimation"}],ShopScene:[function(e,t,n){"use strict";cc._RF.push(t,"179b0s4A8BNV6HqucpydecU","ShopScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../PlayerItem"),c=e("../SnappedScrollview"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemContainer=null,t.snappedScrollView=null,t.playerItems=[],t}return o(t,e),t.prototype.onLoad=function(){var e=this;this.itemContainer.children.forEach(function(t,n){var o=t.getComponent(i.default);e.playerItems.push(o),o.setPlayer(n+1),o.callback=function(t){cc.sys.localStorage.setItem("selected_player",t),e.updateSelectedItem(t)}})},t.prototype.start=function(){var e=cc.sys.localStorage.getItem("selected_player")||1;this.updateSelectedItem(e)},t.prototype.updateSelectedItem=function(e){this.playerItems.forEach(function(t,n){var o=n===e-1;t.node.y=o?30:0}),this.snappedScrollView.setSelectedIndex(e-1)},t.prototype.onPressedBack=function(){cc.director.loadScene("MainScene")},r([l(cc.Node)],t.prototype,"itemContainer",void 0),r([l(c.default)],t.prototype,"snappedScrollView",void 0),t=r([s],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../PlayerItem":"PlayerItem","../SnappedScrollview":"SnappedScrollview"}],SnappedScrollview:[function(e,t,n){"use strict";cc._RF.push(t,"88f35yp4gVJx5issaTrBJYj","SnappedScrollview");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemSize=90,t.selectedItemSize=90,t.spacing=10,t.displaySize=3,t.onScrollEnded=function(){},t.calculatedPercent=[],t.minDisplayIndex=0,t.selectedIndex=0,t.scrollBegan=!1,t}return o(t,e),t.prototype.onLoad=function(){this.scroll=this.getComponent(cc.ScrollView),this.calculatePercents()},t.prototype.calculatePercents=function(){this.calculatedPercent=[];for(var e=this.scroll.content.childrenCount,t=this.selectedItemSize-this.itemSize,n=e*this.itemSize+(e+1)*this.spacing+t-this.scroll.node.width,o=0;o<e;o++){var r=void 0;(r=this.selectedIndex<o?(this.itemSize+this.spacing)*o+t:(this.itemSize+this.spacing)*o+(this.selectedIndex===o?this.spacing:0))>n&&(r=n);var i=r/n;this.calculatedPercent.push(i)}},t.prototype.setSelectedIndex=function(e){this.selectedIndex=e,this.calculatePercents(),this.adjustScrollViewOffset()},t.prototype.onScroll=function(e,t){if(t==cc.ScrollView.EventType.SCROLL_ENDED){if(!this.scrollBegan)return;this.scrollBegan=!1,this.adjustScrollViewOffset(),this.onScrollEnded()}t==cc.ScrollView.EventType.SCROLL_BEGAN&&(this.scrollBegan=!0)},t.prototype.adjustScrollViewOffset=function(){var e=this.getPercent();this.calculateMinDisplayIndex(e),this.scrollToMinIndex(this.minDisplayIndex)},t.prototype.calculateMinDisplayIndex=function(e){for(var t=0;t<this.calculatedPercent.length;t++){if(this.calculatedPercent[t]<=e&&e<=this.calculatedPercent[t+1]){var n=e-this.calculatedPercent[t],o=this.calculatedPercent[t+1]-e;n+o>0&&(this.minDisplayIndex=n<o?t:t+1);break}if(e<this.calculatedPercent[t]){this.minDisplayIndex=t;break}if(this.calculatedPercent[t]>=1)break}},t.prototype.scrollToMinIndex=function(e){this.minDisplayIndex=e,this.scroll.scrollToPercentHorizontal(this.calculatedPercent[e],.3)},t.prototype.getPercent=function(){var e=-this.scroll.getScrollOffset().x;if(e<0)return 0;var t=e/this.scroll.getMaxScrollOffset().x;return t>1?1:t},t.prototype.getMinDisplayIndex=function(){return this.minDisplayIndex},r([a],t.prototype,"itemSize",void 0),r([a],t.prototype,"selectedItemSize",void 0),r([a],t.prototype,"spacing",void 0),r([a],t.prototype,"displaySize",void 0),t=r([c],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],SpriteAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"328ffW6cZxEKpz65Z5b3wtI","SpriteAnimation");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.main=null,t.atlast=null,t.interval=.2,t.prefix="",t.keys="",t.loop=!0,t.step=0,t.indices=[],t.tween=null,t}return o(t,e),t.prototype.onLoad=function(){this.indices=this.keys.split(",")},t.prototype.play=function(){var e,t=this;this.indices.length<2||(this.reset(),null===(e=this.tween)||void 0===e||e.stop(),this.loop?this.tween=cc.tween(this.node).repeatForever(cc.tween().repeat(this.indices.length-1,cc.tween().delay(this.interval).call(function(){t.step++,t.updateSpriteFrame(t.step)})).call(function(){t.reset()})).start():this.tween=cc.tween(this.node).repeat(this.indices.length-1,cc.tween().delay(this.interval).call(function(){t.step++,t.updateSpriteFrame(t.step)})).start())},t.prototype.stop=function(){var e;null===(e=this.tween)||void 0===e||e.stop()},t.prototype.reset=function(){this.step=0,this.updateSpriteFrame(this.step)},t.prototype.updateSpriteFrame=function(e){var t=""+this.prefix+this.indices[this.step];this.main.spriteFrame=this.atlast.getSpriteFrame(t)},r([a(cc.Sprite)],t.prototype,"main",void 0),r([a(cc.SpriteAtlas)],t.prototype,"atlast",void 0),r([a],t.prototype,"interval",void 0),r([a],t.prototype,"prefix",void 0),r([a],t.prototype,"keys",void 0),r([a],t.prototype,"loop",void 0),t=r([c],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],UnselectableComponent:[function(e,t,n){"use strict";cc._RF.push(t,"8af58GA0ghDzJ9cfSYHRxjr","UnselectableComponent");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.UnselectableComponent=void 0;var i=cc._decorator,c=i.ccclass,a=i.disallowMultiple,s=i.executeInEditMode,l=i.menu,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t=r([c,a,s,l("ee/UnselectableComponent")],t)}(cc.Component);n.UnselectableComponent=p,cc._RF.pop()},{}]},{},["GameLevel","GameUtils","LevelItem","LevelObstacle","MovableObject","NestedPrefab","Player","PlayerItem","SnappedScrollview","SpriteAnimation","UnselectableComponent","GameScene","LevelScene","MainScene","ShopScene"]);